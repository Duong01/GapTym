<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>G·∫Øp Tim</title>
  <style>
    :root{
      --bg1:#fff6fb;
      --accent:#ff4d8a;
      --card:#fff;
      --text:#4a2330;
      --reveal-bg: rgba(255, 245, 250, 0.9);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;color:var(--text);background:linear-gradient(180deg,#fff7fb,#fff0f7);}
    .wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:22px}
    .stage{width:1000px;max-width:98vw;background:transparent;border-radius:18px;padding:12px;display:grid;grid-template-columns:1fr 360px;gap:18px;position:relative}
    .game-area{background:radial-gradient(circle at 18% 10%, #fff, transparent 10%), linear-gradient(180deg,#fff,#fff6fb);border-radius:14px;padding:12px;min-height:560px;box-shadow:0 18px 40px rgba(160,40,90,0.06)}
    .topbar{display:flex;align-items:center;justify-content:space-between;padding:6px 10px}
    .title{font-weight:800;font-size:20px;color:var(--accent)}
    .score-box{background:linear-gradient(180deg,#fff,#fff3f6);padding:8px 12px;border-radius:12px;display:flex;align-items:center;gap:8px}
    .score-count{font-weight:800;font-size:18px;color:#8b193f}
    .playfield{position:relative;border-radius:12px;height:420px;margin-top:8px;overflow:hidden;background:
      radial-gradient(circle at 10% 90%, rgba(255,255,255,0.7) 0, transparent 12%),
      linear-gradient(180deg,#fff6fb,#fff0f7);
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.6);}
    .hint{padding:8px 12px;color:#6a2b3d;font-size:14px}
    .panel{display:flex;flex-direction:column;gap:12px;padding:12px}
    .panel .card{background:linear-gradient(180deg,#fff,#fff6fb);border-radius:12px;padding:12px;box-shadow:0 8px 20px rgba(109,20,60,0.04)}
    .btn{background:linear-gradient(90deg,var(--accent),#ff88b8);border:none;color:white;padding:10px 14px;border-radius:10px;font-weight:800;cursor:pointer}
    .btn.secondary{background:linear-gradient(90deg,#ffd6e8,#ffb3d1);color:#7a2842}
    /* heart */
    .heart{position:absolute;width:56px;height:56px;transform:translate(-50%,-50%);cursor:pointer;touch-action:none;z-index:3;border-radius:12px;display:flex;align-items:center;justify-content:center}
    .heart svg{width:100%;height:100%;display:block;pointer-events:none}
    .heart .token{position:absolute;left:50%;top:52%;transform:translate(-50%,-50%);font-weight:700;color:white;text-shadow:0 2px 6px rgba(0,0,0,0.18);font-size:14px;pointer-events:none}
    /* reveal area */
    .reveal{margin-top:12px;padding:12px;border-radius:12px;background:var(--reveal-bg);min-height:74px;display:flex;align-items:center;gap:10px;flex-wrap:wrap}
    .reveal .slot{font-weight:800;font-size:20px;color:#6c1d3a;min-width:18px;text-align:center;padding:6px 8px;border-radius:8px;background:linear-gradient(180deg,#fff,#ffeef8);box-shadow:inset 0 1px 0 rgba(255,255,255,0.7)}
    /* overlay result */
    .overlay{position:fixed;inset:0;background:rgba(6,6,6,0.36);display:flex;align-items:center;justify-content:center;visibility:hidden;opacity:0;transition:all .3s;z-index:9999}
    .overlay.show{visibility:visible;opacity:1}
    .result-card{width:90%;max-width:720px;background:linear-gradient(180deg,#fff,#fff8fb);padding:22px;border-radius:14px;text-align:center;box-shadow:0 24px 60px rgba(97,18,45,0.14)}
    .result-title{font-size:28px;font-weight:900;color:var(--accent);margin-bottom:10px}
    .result-text{font-size:18px;color:#4d2633;line-height:1.5}
    .result-actions{margin-top:16px;display:flex;gap:12px;justify-content:center}
    /* hearts flying effect (when collected) - small style tweak */
    .collected{pointer-events:none;opacity:0.9}
    /* fireworks canvas */
    canvas#fireworks{position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:30}
    @media (max-width:980px){.stage{grid-template-columns:1fr}.panel{order:2}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="stage" id="stage">
      <div class="game-area">
        <div class="topbar">
          <div class="title">G·∫Øp Tim</div>
          <div class="score-box">G·∫Øp: <div class="score-count" id="score">0</div>/10</div>
        </div>

        <div class="hint">Nh·∫•n ho·∫∑c ch·∫°m v√†o tr√°i tim ƒë·ªÉ g·∫Øp. M·ªói tr√°i tim ch·ª©a 1 ph·∫ßn c·ªßa b√≠ m·∫≠t ‚Äî ph·∫ßn ƒë√≥ s·∫Ω hi·ªán l√™n d∆∞·ªõi ƒë√¢y. Khi ƒë·ªß 10 ph·∫ßn, to√†n b·ªô b√≠ m·∫≠t s·∫Ω xu·∫•t hi·ªán!</div>

        <div class="playfield" id="playfield" aria-label="Khu ch∆°i g·∫Øp tim"></div>

        <div class="reveal" id="revealArea" aria-live="polite" aria-atomic="true">
          <!-- hi·ªÉn th·ªã c√°c ph·∫ßn ƒë√£ g·∫Øp -->
          <div style="flex:1;color:#8b193f;font-weight:800">B√≠ m·∫≠t h√© l·ªô:</div>
        </div>

      </div>

      <div class="panel">
        <div class="card">
          <div style="font-weight:900;color:var(--accent);font-size:18px">M·ª•c ti√™u</div>
          <div style="margin-top:8px">G·∫Øp ƒë·ªß <strong>10</strong> tr√°i tim ƒë·ªÉ hi·ªán to√†n b·ªô b√≠ m·∫≠t</div>
        </div>

        <div class="card">
          <div style="font-weight:900">ƒêi·ªÅu khi·ªÉn</div>
          <div style="margin-top:8px;font-size:14px;color:#6b2b3b">Click ho·∫∑c ch·∫°m tr·ª±c ti·∫øp l√™n tr√°i tim. C√≥ th·ªÉ nh·∫•n Space ƒë·ªÉ t·∫°o tr√°i tim th·ª≠ (ph√≠m t·∫Øt).</div>
        </div>

        <div class="card" style="text-align:center;">
          <div style="font-weight:900;color:var(--accent);font-size:16px">√Çm thanh</div>
          <div style="margin-top:8px;display:flex;gap:8px;justify-content:center">
            <button class="btn" id="muteToggle">T·∫Øt nh·∫°c</button>
            <button class="btn secondary" id="resetBtn">Ch∆°i l·∫°i</button>
          </div>
        </div>
      </div>

      <!-- overlay result -->
      <div class="overlay" id="overlay">
        <div class="result-card" role="dialog" aria-modal="true">
          <div class="result-title">√ähhhhh, em ƒë√£ g·∫Øp ƒë·ªß r·ªìi!</div>
          <div class="result-text" id="finalMessage">Ch√∫c em Uy√™n 20-10 vui v·∫ª, lu√¥n xinh ƒë·∫πp v√† chi·ªÅu nay o√°nh c·∫ßu c√πng anh nh√© :)))</div>
          <br/>
          <p style="text-align: center;">----D∆∞∆°ng ka----</p>
          <div class="result-actions">
            <button class="btn" id="closeBtn">Oke anh</button>
            <button class="btn" id="replayBtn">Kh√¥ng</button>
          </div>
        </div>
      </div>

      <canvas id="fireworks"></canvas>

      <!-- audio: piano bg + pop + collect -->
      <audio id="bgMusic" loop>
        <source src="music/giayngantindai.mp3" type="audio/mp3" />
      </audio>
      <audio id="popSound">
        <source src="music/giayngantindai.mp3" type="audio/mp3" />
      </audio>
      <audio id="collectSound">
        <source src="music/giayngantindai.mp3" type="audio/mp3" />
      </audio>

    </div>
  </div>

  <script>
    /* --- C·∫•u h√¨nh v√† d·ªØ li·ªáu --- */
    const PHRASE = "Ch√∫c em Uy√™n 20-10 vui v·∫ª, lu√¥n xinh ƒë·∫πp v√† chi·ªÅu nay o√°nh c·∫ßu c√πng anh nh√© :)))";
    // chia th√†nh 10 ph·∫ßn (m√¨nh chu·∫©n b·ªã 10 token):
    // B·∫°n c√≥ th·ªÉ s·ª≠a tokens n·∫øu mu·ªën c√°c k√Ω t·ª± kh√°c nhau
    const TOKENS = ["Ch√∫c"," ","em"," ","20-10"," ","vui"," ","v·∫ª","üíê"]; // 10 ph·∫ßn
    const TARGET = TOKENS.length;

    const playfield = document.getElementById('playfield');
    const scoreNode = document.getElementById('score');
    const revealArea = document.getElementById('revealArea');
    const overlay = document.getElementById('overlay');
    const finalMessage = document.getElementById('finalMessage');

    const bgMusic = document.getElementById('bgMusic');
    const popSound = document.getElementById('popSound');
    const collectSound = document.getElementById('collectSound');

    const muteToggle = document.getElementById('muteToggle');
    const resetBtn = document.getElementById('resetBtn');
    const replayBtn = document.getElementById('replayBtn');
    const closeBtn = document.getElementById('closeBtn');

    let score = 0;
    let hearts = [];
    let spawnTimer = null;
    let collectedTokens = []; // theo th·ª© t·ª± g·∫Øp
    const spawnInterval = 700;

    // Utility
    function r(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }

    // T·∫°o tr√°i tim v·ªõi token (tokenIndex ch·ªçn trong TOKENS)
    function createHeartWithToken(tokenIndex){
      const token = TOKENS[tokenIndex];
      const el = document.createElement('div');
      el.className = 'heart';
      el.dataset.token = token;
      el.dataset.index = tokenIndex;
      const size = r(44,66);
      el.style.width = size + 'px';
      el.style.height = size + 'px';

      // v·ªã tr√≠ ng·∫´u nhi√™n trong playfield
      const rect = playfield.getBoundingClientRect();
      const x = r(40, rect.width - 40);
      const y = r(rect.height*0.25, rect.height - 40);
      el.style.left = x + 'px';
      el.style.top = y + 'px';

      // gradient heart svg
      el.innerHTML = `
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="g_${Date.now()}_${Math.random()}" x1="0" x2="1">
              <stop offset="0" stop-color="#ff8ab3"/>
              <stop offset="1" stop-color="#ff2d7a"/>
            </linearGradient>
          </defs>
          <path d="M12 21s-7-4.35-9-6.72C-0.11 11.3 2.14 6 6.5 6c2.24 0 3.5 1.3 4.5 2.4 1-1.1 2.26-2.4 4.5-2.4 4.36 0 6.61 5.3 3.5 8.28C19 16.65 12 21 12 21z"
            fill="url(#g_${Date.now()}_${Math.random()})" stroke="#e6a6bf" />
        </svg>
        <div class="token">${token}</div>
      `;

      // nh·∫π nh√†ng di chuy·ªÉn (transform) ƒë·ªÉ tr√¥ng sinh ƒë·ªông
      el.style.transition = `transform ${r(3000,5200)}ms cubic-bezier(.2,.9,.3,1), opacity 800ms`;
      setTimeout(()=>{
        el.style.transform = `translateX(${r(-120,120)}px) translateY(${r(-40,-180)}px) rotate(${r(-25,25)}deg)`;
        el.style.opacity = '0.98';
      }, 80);

      function collect(ev){
        ev.preventDefault();
        ev.stopPropagation();
        if(el.classList.contains('collected')) return;
        el.classList.add('collected');
        // √¢m thanh
        popSound.currentTime = 0; //popSound.play().catch(()=>{});
        // clone ƒë·ªÉ bay v·ªÅ v√πng reveal
        const from = el.getBoundingClientRect();
        const targetRect = revealArea.getBoundingClientRect();
        const clone = el.cloneNode(true);
        document.body.appendChild(clone);
        clone.style.position = 'fixed';
        clone.style.left = from.left + 'px';
        clone.style.top = from.top + 'px';
        clone.style.margin = 0;
        clone.style.zIndex = 9999;
        clone.style.transition = 'all 700ms cubic-bezier(.2,.9,.2,1)';
        requestAnimationFrame(()=>{
          clone.style.left = (targetRect.left + 40 + collectedTokens.length*24) + 'px';
          clone.style.top = (targetRect.top + targetRect.height/2 - from.height/2) + 'px';
          clone.style.transform = 'scale(0.45) rotate(20deg)';
          clone.style.opacity = '0.6';
        });
        setTimeout(()=>{ clone.remove(); }, 800);

        // hi·ªÉn th·ªã token ·ªü reveal area (theo th·ª© t·ª± g·∫Øp)
        const slot = document.createElement('div');
        slot.className = 'slot';
        slot.textContent = token;
        revealArea.appendChild(slot);
        collectedTokens.push(token);
        score++; scoreNode.textContent = score;
        collectSound.currentTime = 0; //collectSound.play().catch(()=>{});

        // x√≥a tr√°i tim th·∫≠t sau delay
        setTimeout(()=>{ el.remove(); hearts = hearts.filter(h=>h!==el); }, 220);

        // khi ƒë·ªß
        if(score >= TARGET) onComplete();
      }

      el.addEventListener('click', collect);
      el.addEventListener('touchstart', collect, {passive:false});
      playfield.appendChild(el);
      hearts.push(el);

      // t·ª± h·ªßy n·∫øu kh√¥ng ƒë∆∞·ª£c g·∫Øp sau 7-10s
      setInterval(() => {
        if (!el.classList.contains('collected')) {
            el.style.transform = `translateX(${r(-80,80)}px) translateY(${r(-60,60)}px) rotate(${r(-20,20)}deg)`;
        }
        }, 4000 + r(0,2000));
    }

    // Spawn nhi·ªÅu tr√°i tim, r·∫£i tokens ng·∫´u nhi√™n ƒë·ªÉ ng∆∞·ªùi ch∆°i t√¨m
    function startSpawning(){
      // t·∫°o 10 tr√°i tim (m·ªói token m·ªôt tim), nh∆∞ng xu·∫•t hi·ªán r·∫£i r√°c theo th·ªùi gian
      let indices = Array.from({length:TOKENS.length}, (_,i)=>i);
      // tr·ªôn m·∫£ng ƒë·ªÉ v·ªã tr√≠ xu·∫•t hi·ªán ng·∫´u nhi√™n
      for (let i=indices.length-1;i>0;i--){ const j = Math.floor(Math.random()*(i+1)); [indices[i],indices[j]]=[indices[j],indices[i]]; }
      let i = 0;
      spawnTimer = setInterval(()=>{
        if(i >= indices.length){ clearInterval(spawnTimer); spawnTimer = null; return; }
        // m·ªói l·∫ßn t·∫°o 1 tr√°i tim mang token indices[i]
        createHeartWithToken(indices[i]);
        i++;
      }, 600);
    }

    function onComplete(){
      // D·ª´ng spawn (n·∫øu c√≥)
      if (spawnTimer) { clearInterval(spawnTimer); spawnTimer = null; }
      // ph√°t nh·∫°c n·ªÅn nh·∫π nh√†ng
      finalMessage.textContent = PHRASE;
      overlay.classList.add('show');

      // start fireworks
      startFireworks();

      // t·∫°o tim bay n·ªÅn (visual)
      createFloatingHearts();
    }

    function resetGame(){
      // d·ªçn h·∫øt tr√°i tim
      hearts.forEach(h=>h.remove()); hearts = [];
      // d·ªçn reveal
      // ch·ªâ gi·ªØ ti√™u ƒë·ªÅ trong reveal
      revealArea.querySelectorAll('.slot').forEach(s=>s.remove());
      collectedTokens = [];
      score = 0; scoreNode.textContent = score;
      // d·ª´ng nh·∫°c & ph√°o
      stopFireworks();
      bgMusic.pause(); bgMusic.currentTime = 0;
      overlay.classList.remove('show');
      // start spawn l·∫°i
      if(spawnTimer) clearInterval(spawnTimer);
      startSpawning();
    }

    // Mute control
    let muted = false;
    muteToggle.addEventListener('click', ()=>{
      muted = !muted;
      bgMusic.muted = muted; popSound.muted = muted; collectSound.muted = muted;
      muteToggle.textContent = muted ? 'B·∫≠t nh·∫°c' : 'T·∫Øt nh·∫°c';
    });

    //resetBtn.addEventListener('click', resetGame);
    resetBtn.addEventListener('click', ()=>{ resetGame(); });
    let noClickCount = 0;

function showFinalMessage() {
  const msgBox = document.createElement('div');
  msgBox.style.position = 'fixed';
  msgBox.style.left = '50%';
  msgBox.style.top = '50%';
  msgBox.style.transform = 'translate(-50%, -50%)';
  msgBox.style.background = 'rgba(255,255,255,0.95)';
  msgBox.style.padding = '20px 30px';
  msgBox.style.borderRadius = '12px';
  msgBox.style.boxShadow = '0 10px 40px rgba(0,0,0,0.2)';
  msgBox.style.fontWeight = '800';
  msgBox.style.color = '#d63384';
  msgBox.style.fontSize = '20px';
  msgBox.style.textAlign = 'center';
  msgBox.textContent = 'Anh bi·∫øt m√†, 5h30 m√¨nh o√°nh v·ªõi nhau nh√© ><';
  document.body.appendChild(msgBox);

  setTimeout(() => {
    msgBox.style.transition = 'opacity 1.2s ease';
    msgBox.style.opacity = '0';
    setTimeout(() => msgBox.remove(), 1200);
  }, 3000);
}

// Khi nh·∫•n ‚ÄúKh√¥ng‚Äù
replayBtn.addEventListener('click', () => {
  noClickCount++;

  // hi·ªáu ·ª©ng nh·ªè d·∫ßn m·ªói l·∫ßn click
  replayBtn.style.transform = `scale(${1 - noClickCount * 0.15})`;
  replayBtn.style.transition = 'transform 0.3s ease';

  if (noClickCount == 3) {
    // sau 3 l·∫ßn th√¨ ƒë·ªïi th√†nh D·∫° (reset k√≠ch th∆∞·ªõc l·∫°i)
    replayBtn.textContent = 'D·∫°';
    replayBtn.style.transform = 'scale(1)';
    // noClickCount = 0;
  }
  if (replayBtn.textContent === 'D·∫°' &&  noClickCount >3) {
    overlay.classList.remove('show');
    stopFireworks();
    //bgMusic.pause();
    //bgMusic.currentTime = 0;
    showFinalMessage(); // üëâ ch·ªâ hi·ªÉn th·ªã khi click v√†o ‚ÄúD·∫°‚Äù
    
    //startSpawning();
  }

  
});
replayBtn.addEventListener('click', () => {
  if (replayBtn.textContent === 'D·∫°' &&  noClickCount == 0) {
    overlay.classList.remove('show');
    stopFireworks();
    //bgMusic.pause();
    //bgMusic.currentTime = 0;
    showFinalMessage(); // üëâ ch·ªâ hi·ªÉn th·ªã khi click v√†o ‚ÄúD·∫°‚Äù
    
    //startSpawning();
  }
});

// Khi nh·∫•n ‚ÄúOke anh‚Äù
closeBtn.addEventListener('click', () => {
  overlay.classList.remove('show');
  stopFireworks();
  //bgMusic.pause();
  //bgMusic.currentTime = 0;
  showFinalMessage(); // üëâ hi·ªÉn th·ªã l·ªùi nh·∫Øn
  
  //startSpawning();
});

// Khi nh·∫•n ‚ÄúD·∫°‚Äù (sau khi n√∫t Kh√¥ng ƒë√£ ƒë·ªïi)


    closeBtn.addEventListener('click', ()=>{ overlay.classList.remove('show'); stopFireworks();  startSpawning(); });

    // initial run
    //startSpawning();

    // Support key press to spawn a heart (for fun / test)
    window.addEventListener('keydown', (e)=>{ if(e.code === 'Space'){ e.preventDefault(); // create a random token heart for testing
        const unused = [];
        for(let k=0;k<TOKENS.length;k++){ if(!collectedTokens.includes(TOKENS[k]) && !hearts.some(h=>h.dataset.index==k)) unused.push(k); }
        if(unused.length>0) createHeartWithToken(unused[Math.floor(Math.random()*unused.length)]);
    }});

    // Ensure audio can start after user gesture on some mobile browsers
    let musicStarted = false;
window.addEventListener('load', () => {
  // t·ª± ph√°t nh·∫°c n·ªÅn sau 1 ch√∫t delay
  setTimeout(() => {
    if (!musicStarted) {
      bgMusic.volume = 0.9;
      bgMusic.play().then(() => {
        musicStarted = true;
      }).catch(() => {
        // N·∫øu b·ªã ch·∫∑n (do ch√≠nh s√°ch tr√¨nh duy·ªát), ƒë·ª£i ng∆∞·ªùi d√πng ·∫•n n√∫t b·∫•t k·ª≥ l·∫ßn ƒë·∫ßu
        const tryPlay = () => {
          if (!musicStarted) {
            bgMusic.play().then(() => {
              musicStarted = true;
              document.removeEventListener('click', tryPlay);
              document.removeEventListener('touchstart', tryPlay);
            }).catch(()=>{});
          }
        };
        document.addEventListener('click', tryPlay, { once: true });
        document.addEventListener('touchstart', tryPlay, { once: true });
      });
    }
  }, 800);
});

// --- Ch·ªâ c√≥ th·ªÉ t·∫Øt/b·∫≠t b·∫±ng n√∫t ---


    /* --------------- Fireworks (simple canvas particle burst) --------------- */
    const canvas = document.getElementById('fireworks');
    const ctx = canvas.getContext('2d');
    let W = canvas.width = stage.clientWidth, H = canvas.height = stage.clientHeight;
    window.addEventListener('resize', ()=>{ W = canvas.width = stage.clientWidth; H = canvas.height = stage.clientHeight; });

    const particles = [];
    let fwInterval = null;
    function randColor(){ const pool=['#ff4d9a','#ffd166','#ff7ab6','#ffd6e8','#ffd1b3','#9be7ff']; return pool[Math.floor(Math.random()*pool.length)]; }

    function burst(x,y){
      const hue = randColor();
      const count = r(18,34);
      for(let i=0;i<count;i++){
        particles.push({
          x,y,
          velX: (Math.random()-0.5)*6,
          velY: (Math.random()-0.8)*6 - 2,
          life: r(40,90),
          age:0,
          color: hue,
          size: Math.random()*3+1
        });
      }
    }

    function startFireworks(){
      if(fwInterval) return;
      fwInterval = setInterval(()=>{ burst(r(80,W-80), r(80,H/2)); }, 2000);
      loop();
    }
    function stopFireworks(){
      clearInterval(fwInterval); fwInterval = null;
    }

    function loop(){
      ctx.clearRect(0,0,W,H);
      for(let i=particles.length-1;i>=0;i--){
        const p = particles[i];
        p.age++; p.x += p.velX; p.y += p.velY; p.velY += 0.06;
        const alpha = Math.max(0, 1 - p.age/p.life);
        ctx.globalAlpha = alpha;
        ctx.fillStyle = p.color;
        ctx.beginPath(); ctx.arc(p.x, p.y, p.size, 0, Math.PI*2); ctx.fill();
        if(p.age > p.life) particles.splice(i,1);
      }
      if(fwInterval) requestAnimationFrame(loop);
    }

    /* Floating hearts background when completed */
    function createFloatingHearts(){
      const N = 12;
      for(let i=0;i<N;i++){
        const h = document.createElement('div');
        h.className = 'heart';
        h.style.width = '36px'; h.style.height = '36px';
        h.style.left = r(10, 90) + '%';
        h.style.top = r(60, 90) + '%';
        h.style.zIndex = 40;
        h.style.opacity = '0.95';
        h.innerHTML = `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 21s-7-4.35-9-6.72C-0.11 11.3 2.14 6 6.5 6c2.24 0 3.5 1.3 4.5 2.4 1-1.1 2.26-2.4 4.5-2.4 4.36 0 6.61 5.3 3.5 8.28C19 16.65 12 21 12 21z" fill="#ff4d8a" stroke="#e6a6bf"/>
        </svg>`;
        document.body.appendChild(h);
        h.style.transition = `transform ${6000 + r(0,3000)}ms linear, opacity 2000ms`;
        setTimeout(()=>{ h.style.transform = `translateY(-220px) translateX(${r(-80,80)}px)`; h.style.opacity='0'; }, 80 + i*150);
        setTimeout(()=>{ h.remove(); }, 7000 + i*200);
      }
    }

  </script>
</body>
</html>
